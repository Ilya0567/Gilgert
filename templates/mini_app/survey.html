<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анкета для людей с синдромом Жильбера</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 30px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        .form-group:last-child {
            border-bottom: none;
        }
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .required {
            color: red;
            margin-right: 5px;
        }
        .radio-option {
            display: block;
            padding: 12px 15px;
            margin-bottom: 8px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .radio-option:hover {
            background-color: #f5f9ff;
        }
        input[type="radio"] {
            margin-right: 10px;
        }
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .help-text {
            font-size: 14px;
            color: #7f8c8d;
            margin-top: 5px;
        }
        .submit-btn {
            display: inline-block;
            background-color: #4285f4;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        .submit-btn:hover {
            background-color: #3367d6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Анкета для людей с синдромом Жильбера</h1>
        <form id="surveyForm" action="/submit-survey" method="post">
            <input type="hidden" name="telegram_id" id="telegram_id">
            
            <div class="form-group">
                <label><span class="required">*</span> Вы</label>
                <label class="radio-option">
                    <input type="radio" name="gender" value="male" required> Мужчина
                </label>
                <label class="radio-option">
                    <input type="radio" name="gender" value="female"> Женщина
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Сколько вам лет?</label>
                <input type="number" name="age" required min="1" max="120">
                <div class="help-text">Количество полных лет</div>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Ставили ли вам диагноз "Синдром Жильбера"?</label>
                <label class="radio-option">
                    <input type="radio" name="diagnosis" value="yes" required> Да
                </label>
                <label class="radio-option">
                    <input type="radio" name="diagnosis" value="no"> Нет
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Есть ли у вас в семье случаи синдрома Жильбера или других заболеваний печени?</label>
                <label class="radio-option">
                    <input type="radio" name="family_history" value="yes" required> Да
                </label>
                <label class="radio-option">
                    <input type="radio" name="family_history" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="family_history" value="unknown"> Не знаю
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> При сдаче анализа крови замечали ли вы повышение уровня билирубина?</label>
                <label class="radio-option">
                    <input type="radio" name="bilirubin" value="yes" required> Да, замечали
                </label>
                <label class="radio-option">
                    <input type="radio" name="bilirubin" value="no"> Нет, не замечали
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Были ли у вас эпизоды желтухи в детстве?</label>
                <label class="radio-option">
                    <input type="radio" name="childhood_jaundice" value="yes" required> Да
                </label>
                <label class="radio-option">
                    <input type="radio" name="childhood_jaundice" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="childhood_jaundice" value="unsure"> Сомневаетесь были или не были
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Отмечали ли вы у себя пожелтение кожи и/или склер?</label>
                <label class="radio-option">
                    <input type="radio" name="skin_yellowing" value="often" required> Да, часто
                </label>
                <label class="radio-option">
                    <input type="radio" name="skin_yellowing" value="sometimes"> Да, иногда
                </label>
                <label class="radio-option">
                    <input type="radio" name="skin_yellowing" value="no"> Нет
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Есть ли у вас боли в правом подреберье?</label>
                <label class="radio-option">
                    <input type="radio" name="right_side_pain" value="yes" required> Да
                </label>
                <label class="radio-option">
                    <input type="radio" name="right_side_pain" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="right_side_pain" value="sometimes"> Иногда
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Есть ли у вас другие состояния здоровья, связанные с печенью, такие как гепатит, желчекаменная болезнь или цирроз?</label>
                <label class="radio-option">
                    <input type="radio" name="other_liver_conditions" value="yes" required> Да
                </label>
                <label class="radio-option">
                    <input type="radio" name="other_liver_conditions" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="other_liver_conditions" value="unknown"> Не знаю
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Замечали ли вы связь между употреблением определенных продуктов (жирная пища, чеснок, лук) и ухудшением самочувствия?</label>
                <label class="radio-option">
                    <input type="radio" name="food_correlation" value="often" required> Да, часто
                </label>
                <label class="radio-option">
                    <input type="radio" name="food_correlation" value="sometimes"> Да, иногда
                </label>
                <label class="radio-option">
                    <input type="radio" name="food_correlation" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="food_correlation" value="not_consuming"> Не употребляю указанные продукты
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Замечали ли вы связь между умеренным употреблением алкоголя и ухудшением самочувствия?</label>
                <label class="radio-option">
                    <input type="radio" name="alcohol_correlation" value="always" required> Да, всегда
                </label>
                <label class="radio-option">
                    <input type="radio" name="alcohol_correlation" value="sometimes"> Да, иногда
                </label>
                <label class="radio-option">
                    <input type="radio" name="alcohol_correlation" value="no"> Нет
                </label>
                <label class="radio-option">
                    <input type="radio" name="alcohol_correlation" value="not_consuming"> Не употребляю алкоголь
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Как часто у вас случаются эпизоды слабости и усталости?</label>
                <label class="radio-option">
                    <input type="radio" name="fatigue_frequency" value="daily" required> Почти ежедневно
                </label>
                <label class="radio-option">
                    <input type="radio" name="fatigue_frequency" value="weekly"> Несколько раз в неделю
                </label>
                <label class="radio-option">
                    <input type="radio" name="fatigue_frequency" value="monthly"> Несколько раз в месяц
                </label>
                <label class="radio-option">
                    <input type="radio" name="fatigue_frequency" value="rarely"> Почти никогда
                </label>
                <label class="radio-option">
                    <input type="radio" name="fatigue_frequency" value="never"> Никогда
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Чувствуете ли вы себя более уставшим или слабым после длительного голодания или пропуска приемов пищи?</label>
                <label class="radio-option">
                    <input type="radio" name="hunger_fatigue" value="always" required> Да, всегда
                </label>
                <label class="radio-option">
                    <input type="radio" name="hunger_fatigue" value="sometimes"> Да, иногда
                </label>
                <label class="radio-option">
                    <input type="radio" name="hunger_fatigue" value="no"> Нет
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Как вы оцениваете свое самочувствие после умеренных физических нагрузок?</label>
                <label class="radio-option">
                    <input type="radio" name="exercise_feeling" value="excellent" required> Отлично
                </label>
                <label class="radio-option">
                    <input type="radio" name="exercise_feeling" value="good"> Удовлетворительно
                </label>
                <label class="radio-option">
                    <input type="radio" name="exercise_feeling" value="bad"> Плохо
                </label>
                <label class="radio-option">
                    <input type="radio" name="exercise_feeling" value="very_bad"> Ужасно
                </label>
            </div>

            <div class="form-group">
                <label><span class="required">*</span> Как вы оцениваете свое общее состояние здоровья?</label>
                <label class="radio-option">
                    <input type="radio" name="overall_health" value="excellent" required> Отличное
                </label>
                <label class="radio-option">
                    <input type="radio" name="overall_health" value="good"> Хорошее
                </label>
                <label class="radio-option">
                    <input type="radio" name="overall_health" value="satisfactory"> Удовлетворительное
                </label>
                <label class="radio-option">
                    <input type="radio" name="overall_health" value="bad"> Плохое
                </label>
                <label class="radio-option">
                    <input type="radio" name="overall_health" value="very_bad"> Очень плохое
                </label>
            </div>

            <div class="form-group">
                <label>Если вы хотите помочь в нашем исследовании и пообщаться на эту тему, пожалуйста, оставьте вашу контактную информацию:</label>
                <input type="text" name="contact_info">
                <div class="help-text">Можно оставить номер телефона, ник в телеграме, страницу в соц.сетях</div>
            </div>

            <button type="submit" class="submit-btn">Отправить</button>
        </form>
    </div>

    <script>
        // Получаем telegram_id из URL параметров
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const telegramId = urlParams.get('telegram_id');
            if (telegramId) {
                document.getElementById('telegram_id').value = telegramId;
            }
            
            // Отправка формы
            document.getElementById('surveyForm').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                fetch('/submit-survey', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Показываем сообщение об успешной отправке
                        alert('Спасибо за заполнение анкеты!');
                        
                        // Перенаправляем обратно в Telegram, если есть параметр
                        if (telegramId) {
                            window.location.href = `https://t.me/Gilbert_assistant_bot?start=survey_completed`;
                        }
                    } else {
                        alert('Произошла ошибка при отправке анкеты. Пожалуйста, попробуйте еще раз.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Произошла ошибка при отправке анкеты. Пожалуйста, попробуйте еще раз.');
                });
            });
        });
    </script>
</body>
</html> 